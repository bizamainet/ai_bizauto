<!-- 클라이언트 코드 -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no" />
    <title>BizAuto</title>
    <meta property="description" content="The ultimate L1 for Web 3.0 build" />
    <meta property="og:url" content="https://amaxg.net" />
    <meta property="og:title" content="BizAuto" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="assets/images/og_image_small.png" />
    <meta property="og:description" content="The ultimate L1 for Web 3.0 build" />
    <link rel="shortcut icon" href="assets/images/favicon.png?t=1" />
    <!-- Font CSS -->
    <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- Common CSS -->
    <link rel="stylesheet" href="assets/css/common.css?t=1732522071" />
    <link rel="stylesheet" href="assets/css/responsive.css?t=1727252315" />
    <link rel="preload" as="image" href="assets/images/ai_price_prediction.webp" type="image/webp">
    <link rel="preload" as="image" href="assets/images/bg-chat.webp" type="image/webp">
</head>

<header class="header-area header">
    <div class="custom-container">
        <div class="custom-row align-items-center">
            <div class="header-left d-flex align-items-center justify-content-between">
                <a href="https://amaxg.net" target="_self" class="logo">
                    <img src="assets/images/logo.svg" alt="logo" />
                </a>
                <div class="header-left-right">
                    <div class="menu-bar"></div>
                </div>
                <nav class="navbar-wrapper d-flex align-items-center">
                    <a href="https://amaxg.net" class="logo"></a>
                    <div class="close-menu-bar"></div>
                    <ul>
                        <li>
                            <a href="#aboutMenu" data-bs-toggle="collapse" aria-expanded="false"
                                class="dropdown-collapse">
                                About
                            </a>
                            <ul class="collapse list-unstyled" id="aboutMenu">
                                <li>
                                    <a href="https://amaxg.gitbook.io/whitepaper-eng" target="_blank">
                                        BizAuto Docs
                                    </a>
                                </li>
                                <li>
                                    <a href="https://explorer.bizauto.io/" target="_blank">
                                        Mainnet
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="https://amaxg.bizauto.io" target="_blank">Product</a>
                        </li>
                        <li>
                            <a href="ai_biza.html">AI BizAuto</a>
                        </li>
                        <li>
                            <a href="#section-news">News</a>
                        </li>
                        <li>
                            <a href="#communityMenu" data-bs-toggle="collapse" aria-expanded="false"
                                class="dropdown-collapse">
                                Community
                            </a>
                            <ul class="collapse list-unstyled" id="communityMenu">
                                <li>
                                    <a href="https://x.com/BIZAcoin" target="_blank">
                                        Twitter
                                    </a>
                                </li>
                                <li>
                                    <a href="https://t.me/bizaglobal" target="_blank">
                                        Telegram
                                    </a>
                                </li>
                                <li>
                                    <a href="https://t.me/bizaglobalcommunity" target="_blank">
                                        Telegram (Global)
                                    </a>
                                </li>
                                <li>
                                    <a href="https://t.me/BIZA_M_Community" target="_blank">
                                        Telegram (Korean)
                                    </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </nav>
            </div>
            <div class="header-right">
                <div class="header-contact-info d-flex align-items-center">
                    <div class="nav-item dropdown">
                        <a href="#">
                            About
                            <svg xmlns="http://www.w3.org/2000/svg" width="10" height="6" viewBox="0 0 10 6"
                                fill="none">
                                <path
                                    d="M4.95954 5.70841C4.8669 5.70841 4.78127 5.69342 4.70266 5.66341C4.62391 5.63328 4.54752 5.58119 4.4735 5.50716L0.445578 1.47925C0.311412 1.34508 0.24662 1.18078 0.251204 0.986331C0.255787 0.791886 0.325231 0.627512 0.459537 0.493206C0.593843 0.3589 0.758218 0.291748 0.952662 0.291748C1.14711 0.291748 1.31141 0.3589 1.44558 0.493206L4.95954 4.02091L8.48725 0.493206C8.62155 0.3589 8.78363 0.294108 8.9735 0.298831C9.16322 0.303414 9.32523 0.372858 9.45954 0.507164C9.59384 0.641331 9.661 0.805637 9.661 1.00008C9.661 1.19453 9.59384 1.3589 9.45954 1.49321L5.44558 5.50716C5.37155 5.58119 5.29516 5.63328 5.21641 5.66341C5.1378 5.69342 5.05218 5.70841 4.95954 5.70841Z"
                                    fill="#F0F5FF" />
                                <defs>
                                    <linearGradient id="linear-gradient" x1="3.83257" y1="0.291748" x2="8.42401"
                                        y2="1.59069" gradientUnits="userSpaceOnUse">
                                        <stop stop-color="#9954BA" />
                                        <stop offset="1" stop-color="#7A63D6" />
                                    </linearGradient>
                                </defs>
                            </svg>
                        </a>
                        <div class="dropdown-item-group">
                            <div class="dropdown-item">
                                <a href="https://amaxg.gitbook.io/whitepaper-eng" target="_blank">
                                    BizAuto Docs
                                </a>
                            </div>
                            <div class="dropdown-item">
                                <a href="https://explorer.bizauto.io/" target="_blank">
                                    Mainnet
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="nav-item">
                        <a href="https://amaxg.bizauto.io" target="_blank">Product</a>
                    </div>
                    <div class="nav-item">
                        <a href="ai_biza.html">AI BizAuto</a>
                    </div>
                    <div class="nav-item">
                        <a href="#section-news">News</a>
                    </div>
                    <div class="nav-item dropdown">
                        <a href="#">
                            Community
                            <svg xmlns="http://www.w3.org/2000/svg" width="10" height="6" viewBox="0 0 10 6"
                                fill="none">
                                <path
                                    d="M4.95954 5.70841C4.8669 5.70841 4.78127 5.69342 4.70266 5.66341C4.62391 5.63328 4.54752 5.58119 4.4735 5.50716L0.445578 1.47925C0.311412 1.34508 0.24662 1.18078 0.251204 0.986331C0.255787 0.791886 0.325231 0.627512 0.459537 0.493206C0.593843 0.3589 0.758218 0.291748 0.952662 0.291748C1.14711 0.291748 1.31141 0.3589 1.44558 0.493206L4.95954 4.02091L8.48725 0.493206C8.62155 0.3589 8.78363 0.294108 8.9735 0.298831C9.16322 0.303414 9.32523 0.372858 9.45954 0.507164C9.59384 0.641331 9.661 0.805637 9.661 1.00008C9.661 1.19453 9.59384 1.3589 9.45954 1.49321L5.44558 5.50716C5.37155 5.58119 5.29516 5.63328 5.21641 5.66341C5.1378 5.69342 5.05218 5.70841 4.95954 5.70841Z"
                                    fill="#F0F5FF" />
                            </svg>
                        </a>
                        <div class="dropdown-item-group">
                            <div class="dropdown-item">
                                <a href="https://x.com/BIZAcoin" target="_blank">
                                    Twitter
                                </a>
                            </div>
                            <div class="dropdown-item">
                                <a href="https://t.me/bizaglobal" target="_blank">
                                    Telegram
                                </a>
                            </div>
                            <div class="dropdown-item">
                                <a href="https://t.me/bizaglobalcommunity" target="_blank">
                                    Telegram (Global)
                                </a>
                            </div>
                            <div class="dropdown-item">
                                <a href="https://t.me/BIZA_M_Community" target="_blank">
                                    Telegram (Korean)
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<body>
    <section class="price-prediction-section" id="price-prediction">
        <div class="crypto-dashboard">
            <div class="main-header_1">
                <div class="header-left">
                    <h1 class="main-title">AI-Powered Price Prediction</h1>
                    <p class="subtitle">Find your favorite coin and share price predictions on 𝕏</p>
                </div>
                <div class="refresh-section">
                    <button onclick="refreshData()" class="refresh-button">
                        <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" fill="none">
                            <path d="M23 4v6h-6M1 20v-6h6"></path>
                            <path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"></path>
                        </svg>
                        Refresh
                    </button>
                    <span id="lastUpdated" class="last-updated">Last updated: Never</span>
                </div>
            </div>


            <!-- 검색 섹션 추가 -->
            <div class="search-section">
                <div class="search-container">
                    <input type="text" id="coinSearch" placeholder="Enter coin fullname (e.g., bitcoin instead of BTC)"
                        class="search-input">
                    <button onclick="searchCoin()" class="search-button">Search</button>
                </div>
            </div>

            <!-- 검색 결과 표시 섹션 수정 -->
            <div id="searchResult" class="search-result hidden">
                <div class="result-card">
                    <div class="result-header">
                        <h2 id="searchCoinName">Coin Stats</h2>
                        <button onclick="shareToTwitter()" class="twitter-share-button">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                                <path
                                    d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
                            </svg>
                            <!-- <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" fill="none">
                                <path
                                    d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z">
                                </path>
                            </svg> -->
                            Share on X
                        </button>
                    </div>
                    <div class="result-grid">
                        <div class="stat-item">
                            <h3>Price USD</h3>
                            <div id="searchPrice" class="value">$0.00</div>
                        </div>
                        <div class="stat-item">
                            <h3>24h Change</h3>
                            <div id="searchChange" class="value">0.00%</div>
                        </div>
                        <div class="stat-item">
                            <h3>Market Cap</h3>
                            <div id="searchMarketCap" class="value">$0.00</div>
                        </div>
                        <div class="stat-item">
                            <h3>24h Volume</h3>
                            <div id="searchVolume" class="value">$0.00</div>
                        </div>
                        <div class="stat-item">
                            <h3>Pred. 24h</h3>
                            <div id="searchPred24h" class="value">$0.00</div>
                        </div>
                        <div class="stat-item">
                            <h3>Pred. 7d</h3>
                            <div id="searchPred7d" class="value">$0.00</div>
                        </div>
                        <div class="stat-item">
                            <h3>Pred. 30d</h3>
                            <div id="searchPred30d" class="value">$0.00</div>
                        </div>
                        <div class="stat-item">
                            <h3>Confidence</h3>
                            <div id="searchConfidence" class="value">0%</div>
                        </div>
                        <div class="stat-item">
                            <h3>Trend</h3>
                            <div id="searchTrend" class="value">-</div>
                        </div>
                        <div class="stat-item">
                            <h3>Risk Level</h3>
                            <div id="searchRisk" class="value">-</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 메인 코인들 행 -->
            <div class="top-coins-container">
                <div id="topCoinsRows"></div>
            </div>

            <!-- BIZA 하이라이트 섹션 -->
            <div class="biza-highlight">
                <div class="biza-header">
                    <img src="assets/images/logo.svg" alt="BIZA" class="biza-logo">
                    <h2>Price & Stats</h2>
                </div>
                <div class="biza-stats">
                    <div class="stat-card">
                        <h3>Price USD</h3>
                        <div id="bizaPrice" class="value">$0.000</div>
                    </div>
                    <div class="stat-card">
                        <h3>24h Change</h3>
                        <div id="bizaChange" class="value">0.00%</div>
                    </div>
                    <div class="stat-card">
                        <h3>Market Cap</h3>
                        <div id="bizaMarketCap" class="value">$0.00</div>
                    </div>
                    <div class="stat-card">
                        <h3>24h Volume</h3>
                        <div id="bizaVolume" class="value">$0.00</div>
                    </div>
                </div>
            </div>

            <!-- biza 하이라이트 아래에 Prediction 섹션 추가 -->
            <div class="prediction-section">
                <h2>$BizAuto Price Prediction</h2>
                <div class="prediction-stats">
                    <div class="stat-card">
                        <h3>Predicted Price (24h)</h3>
                        <div id="prediction24h" class="value">$0.00000000</div>
                    </div>
                    <div class="stat-card">
                        <h3>Predicted Price (7d)</h3>
                        <div id="prediction7d" class="value">$0.00000000</div>
                    </div>
                    <div class="stat-card">
                        <h3>Confidence Level</h3>
                        <div id="confidence" class="value">0.0%</div>
                    </div>
                    <div class="stat-card">
                        <h3>Trend</h3>
                        <div id="trend" class="value">Unknown</div>
                    </div>
                    <div class="stat-card">
                        <h3>Risk Level</h3>
                        <div id="risk" class="value">Unknown</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="chatbot-section">
        <div class="main-header_2">
            <div class="header-left">
                <h1 class="main-title">BizAuto AI Chat Bot</h1>
                <p class="subtitle">You can ask about BizAuto or any other questions.</p>
            </div>
        </div>
        <div class="chat-container" id="chatbot-section">
            <div class="chat-header">
                <img src="assets/images/logo.svg" alt="BIZA Bot">
                <span>BIZA AI Bot</span>
            </div>

            <div class="messages-container" id="messages"></div>

            <div class="loading-container" id="loadingContainer">
                <img src="assets/images/favicon.png" alt="BIZA Bot" style="width: 40px; margin-bottom: 10px;">
                <p>BIZA AI Bot is working hard...<span class="loading-dots"></span></p>
            </div>

            <div class="input-container">
                <input type="text" id="chatInput" placeholder="Ask about BIZA or anything...">
                <button class="send-button" onclick="sendMessage()">Send</button>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="left">
            <div class="logo">
                <a href="https://amaxg.net" target="_self">
                    <img src="assets/images/logo.svg" alt="logo" />
                </a>
            </div>
            <p>
                Copyright © AMAXG. Inc. All rights reserved.<br />
                39, Teheran-ro 33-gil, Gangnam-gu, Seoul, Republic of Korea 06140
            </p>
        </div>
        <div class="right">
            <div class="web">
                <a href="https://amaxg.gitbook.io/whitepaper-eng" target="_blank">
                    Whitepaper
                </a>
                <a href="https://github.com/bizamainet" target="_blank">
                    Github
                </a>
                <a href="https://developers.bizauto.io/getting-started-guides" target="_blank">
                    BizAuto Dev
                </a>
            </div>
            <div class="community">
                <a class="gradient-button" href="https://x.com/BIZAcoin" target="_blank">
                    <img src="assets/images/icon-x.svg" alt="icon-x" />
                </a>
                <a class="gradient-button" href="https://t.me/bizaglobal" target="_blank">
                    <img src="assets/images/icon-telegram.svg" alt="icon-telegram" />
                </a>
                <a class="gradient-button" href="https://medium.com/bizauto" target="_blank">
                    <img src="assets/images/icon-medium.svg" alt="icon-medium" />
                </a>
            </div>
        </div>
    </footer>
</body>

<style>
    body {
        background-image: linear-gradient(to bottom,
                rgba(13, 5, 53, 1.0),
                /* 상단: 완전 투명 */
                rgba(13, 5, 53, 0.95),
                /* 상위 20%: 약간 불투명 */
                rgba(13, 5, 53, 0.9),
                /* 중간: 중간 투명도 */
                rgba(13, 5, 53, 0.85),
                /* 하위 80%: 많이 불투명 */
                rgba(13, 5, 53, 0.8)),
            /* 하단: 거의 불투명 */
            url('assets/images/ai_price_prediction.webp');
        background-position: center;
        background-size: cover;
    }

    /* 공통 섹션 스타일 */
    section {
        position: relative;
        width: 100%;
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
        background-attachment: fixed;
        /* 패럴랙스 효과 */
    }

    @media (max-width: 768px) {
        .chat-header span {
            font-family: "Montserrat", sans-serif !important;
        }

        .bot-message .message-bubble {
            min-width: 11rem;
        }
    }

    /* 모바일 메뉴에서의 버튼 스타일 */
    .mobile-menu .cta-button {
        display: inline-block;
        margin-top: 10px;
        margin-left: 0;
        text-align: center;
    }

    /* 반응형 스타일 */
    @media screen and (max-width: 768px) {
        .nav-links .cta-button {
            display: none;
            /* 모바일에서는 모바일 메뉴에서만 버튼 표시 */
        }
    }

    .nav-links {
        display: flex;
        align-items: center;
        /* 수직 중앙 정렬 */
        gap: 20px;
        /* 링크 간격 */
        height: 100%;
        /* 헤더의 전체 높이를 사용 */
    }


    .refresh-section {
        display: inline-block;
        align-items: center;
        gap: 15px;
        margin-left: auto;
        /* 우측 정렬 */
    }

    .refresh-button {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        background-color: white;
        color: #101B44;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: bold;
    }

    .refresh-button:hover {
        background-color: #f0f0f0;
        transform: scale(1.05);
    }

    .last-updated {
        color: #e3f2fd;
        font-size: 10px;
    }

    .main-header_1 {
        display: flex;
        justify-content: space-between;
        /* 헤더 내부 요소들 사이 공간 분배 */
        align-items: self-start;
        color: white;
        margin-bottom: 20px;
        padding-left: 20px;
        /* background: linear-gradient(135deg, #3f0b57, #170756);
        border-radius: 15px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); */
    }

    .main-header_2 {
        display: flex;
        max-width: 1200px;
        margin: 30px auto;
        padding-top: 30px;
        padding-left: 20px;
        justify-content: space-between;
        /* 헤더 내부 요소들 사이 공간 분배 */
        align-items: self-start;
        color: white;
    }

    .header-left {
        text-align: left;
    }

    .main-title {
        font-size: 2.0rem;
        font-weight: 700;
        margin: 0 0 0px 0;
        background: linear-gradient(to right, #fff, #fff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .subtitle {
        font-size: 1.1rem;
        margin: 0;
        color: #eee;
        font-weight: 300;
        letter-spacing: 0.5px;
    }

    /* 반응형 스타일 */
    @media (max-width: 768px) {
        .main-title {
            font-size: 2rem;
        }

        .subtitle {
            font-size: 1rem;
        }
    }

    /* 기존 crypto-dashboard 스타일 수정 */
    .crypto-dashboard {
        max-width: 1200px;
        margin: 40px auto 20px;
        /* 상단 여백 줄임 */
        padding: 20px;
        font-family: Arial, sans-serif;
    }

    .search-section {
        max-width: 1200px;
        margin: 10px auto;
        padding: 20px;
    }

    .search-container {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
    }

    .search-input {
        flex: 1;
        padding: 12px;
        border: 2px solid #eee;
        border-radius: 8px;
        font-size: 16px;
        transition: border-color 0.3s;
        -webkit-appearance: none;
        /* 모바일 기본 스타일 제거 */
    }

    .search-input:focus {
        border-color: #7A63D6;
        outline: none;
    }

    .search-button {
        padding: 12px 24px;
        background: linear-gradient(to right, #9954BA 27.34%, #7A63D6 72.66%);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    .search-button:hover {
        background: linear-gradient(to right, #5b2374 27.34%, #180b50 72.66%);
    }

    .search-result {
        margin-bottom: 30px;
        transition: opacity 0.3s ease;
    }

    .search-result.visible {
        opacity: 1;
        transform: translateY(0);
    }

    .search-result.visible .result-card {
        transform: translateY(0);
        opacity: 1;
    }

    /* 모바일 디바이스를 위한 추가 스타일 */
    @media (max-width: 768px) {

        .search-section {
            padding: 15px;
            margin: 15px auto;
        }

        .search-container {
            width: 100%;
            max-width: none;
            gap: 8px;
        }

        .search-input {
            padding: 10px;
            height: 44px;
            /* 터치하기 좋은 높이 */
        }

        .search-button {
            padding: 10px 20px;
            height: 44px;
            min-width: 80px;
            /* 터치하기 좋은 너비 */
        }
    }

    .result-card {
        background: white;
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        transform: translateY(20px);
        opacity: 0;
        transition: all 0.3s ease;
    }

    .hidden {
        display: none !important;
    }

    .loading {
        text-align: center;
        padding: 20px;
        color: #666;
    }

    .result-header {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 20px;
    }

    .result-header h2 {
        color: #101B44;
        font-size: 1.3rem !important;
    }

    .coin-logo {
        width: 40px;
        height: 40px;
        border-radius: 50%;
    }

    .twitter-share-button {
        margin-left: auto;
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        background-color: #1da1f2;
        color: white;
        border: none;
        border-radius: 20px;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    .twitter-share-button:hover {
        background-color: #1991db;
    }

    .twitter-share-button svg {
        stroke: white;
    }

    .result-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
    }

    .stat-item {
        background: linear-gradient(to right bottom, #f8f9fa 27.34%, #f1eeff 72.66%);
        padding: 15px;
        border-radius: 10px;
        text-align: center;
        border: 1px solid #f5dfff;
    }

    .stat-item h3 {
        color: #657786;
        font-size: 14px;
        margin-bottom: 8px;
    }

    .stat-item .value {
        font-size: 18px;
        font-weight: bold;
        color: #14171a;
    }

    .hidden {
        display: none;
    }

    .crypto-dashboard {
        max-width: 1200px;
        margin: 120px auto 20px;
        padding: 20px;
        font-family: Arial, sans-serif;
    }

    .top-coins-container {
        background: transparent;
        border-radius: 5px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.9);
        overflow: hidden;
    }

    .coin-row {
        display: grid;
        grid-template-columns: 0.5fr 2fr 1fr 1fr 1.5fr 1.5fr 1fr 1fr 1fr 1fr;
        gap: 10px;
        padding: 15px 20px;
        align-items: center;
        background: rgba(13, 5, 53, 0.97);
        border-bottom: 1px solid #7A63D6;
    }

    .coin-row-header {
        display: grid;
        grid-template-columns: 0.5fr 2fr 1fr 1fr 1.5fr 1.5fr 1fr 1fr 1fr 1fr;
        gap: 10px;
        padding: 15px 20px;
        align-items: center;
        font-weight: bold;
        background: linear-gradient(to right, #9954BA 27.34%, #7A63D6 72.66%);
        color: #ffffff;
    }

    /* 트렌드 색상 */
    .trend.bullish {
        color: #00c853;
    }

    .trend.bearish {
        color: #ff3d00;
    }

    .trend.neutral {
        color: #cfcfcf;
    }

    /* 예측 가격 폰트 */
    .prediction-7d,
    .prediction-30d {
        font-family: Arial, sans-serif;
    }

    /* 반응형 레이아웃 */
    @media (max-width: 1200px) {

        .prediction-30d,
        .risk {
            display: none;
        }

        .coin-row {
            grid-template-columns: 0.5fr 2fr 1fr 1fr 1.5fr 1.5fr 1fr 1fr;
        }
    }

    @media (max-width: 900px) {

        .market-cap,
        .volume,
        .prediction-7d {
            display: none;
        }

        .coin-row {
            grid-template-columns: 0.5fr 2fr 1fr 1fr 1fr;
        }
    }

    .coin-info {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .coin-info img {
        width: 24px;
        height: 24px;
    }

    .change.positive {
        color: #00c853;
    }

    .change.negative {
        color: #ff3d00;
    }

    .biza-highlight {
        margin-top: 30px;
        background: linear-gradient(to right bottom, #f8f9fa 27.34%, #f1eeff 72.66%);
        border-radius: 5px;
        padding: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .biza-header {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 20px;
    }

    .biza-header h2 {
        font-family: "Montserrat", sans-serif;
        color: #101B44;
        margin: 0;
    }

    .biza-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
    }

    .stat-card {
        background: white;
        padding: 15px;
        border-radius: 8px;
        text-align: center;
        border: 0.5px solid #ddd;
    }

    .stat-card h3 {
        font-size: 14px;
        color: #666;
        margin: 0 0 10px 0;
    }

    .stat-card .value {
        font-size: 20px;
        font-weight: bold;
        color: #101B44;
    }

    .prediction-section {
        margin-top: 30px;
        background: linear-gradient(to right bottom, #f8f9fa 27.34%, #e4fbff 72.66%);
        border-radius: 5px;
        padding: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .prediction-section h2 {
        font-family: "Montserrat", sans-serif;
        color: #004080;
        margin-bottom: 20px;
    }

    .prediction-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
    }

    .prediction-stats .stat-card {
        background: white;
        padding: 15px;
        border-radius: 8px;
        text-align: center;
    }

    .prediction-stats .stat-card h3 {
        font-size: 14px;
        color: #666;
        margin: 0 0 10px 0;
    }

    .prediction-stats .stat-card .value {
        font-size: 20px;
        font-weight: bold;
        color: #004080;
    }

    @media (max-width: 768px) {
        .coin-row {
            grid-template-columns: 0.5fr 2fr 1fr 1fr;
        }

        .market-cap,
        .volume {
            display: none;
        }

        .biza-stats {
            grid-template-columns: repeat(2, 1fr);
        }

        section {
            background-attachment: scroll;
            /* 모바일에서는 fixed 제거 */
        }

        .price-prediction-section::after,
        #chatbot-section::before {
            height: 100px;
        }
    }

    /* 챗봇 섹션 */
    #chatbot-section {
        position: relative;
        min-height: 60vh;
        z-index: 1;
    }

    .chat-container {
        max-width: 1160px;
        height: 500px;
        margin: 20px auto;
        background: #fff4ff;
        border-radius: 10px;
        font-family: Arial, sans-serif;
        display: flex;
        flex-direction: column;
        box-shadow: 0 0px 8px rgba(0, 0, 0, 0.1);
    }

    .chat-header {
        padding: 15px;
        border-bottom: 1px solid #ddd;
        display: flex;
        align-items: center;
        gap: 10px;
        background: white;
        border-radius: 5px 5px 0 0;
    }

    .chat-header img {
        width: 40px;
        height: 40px;
        border-radius: 50%;
    }

    .chat-header span {
        font-size: 16px;
        font-weight: bold;
        color: #101B44;
        font-family: 'Pretendard';
    }

    .messages-container {
        flex: 1;
        overflow-y: auto;
        padding: 20px;
    }

    .message-row {
        display: flex;
        margin-bottom: 15px;
        align-items: flex-start;
    }

    .user-message {
        flex-direction: row-reverse;
    }

    .message-content {
        display: flex;
        align-items: flex-end;
        max-width: 80%;
        gap: 8px;
    }

    .message-bubble {
        padding: 10px 15px;
        border-radius: 15px;
        position: relative;
    }

    .bot-message .message-bubble {
        background: white;
        color: black;
        margin-left: 8px;
    }

    .user-message .message-bubble {
        background: linear-gradient(to right, #9954BA 27.34%, #7A63D6 72.66%);
        color: white;
    }

    .timestamp {
        font-size: 11px;
        color: #666;
        margin-bottom: 5px;
        white-space: nowrap;
    }

    .input-container {
        padding: 15px;
        border-top: 1px solid #ddd;
        display: flex;
        gap: 10px;
        background: white;
        border-radius: 0 0 5px 5px;
    }

    .input-container input {
        flex: 1;
        padding: 10px;
        font-size: 14px;
        padding-left: 17px !important;
        border: 1px solid #ddd;
        background-color: #f6f6f6;
        border-radius: 20px;
        outline: none;
    }

    .send-button {
        padding: 10px 30px;
        background: linear-gradient(to right, #9954BA 27.34%, #7A63D6 72.66%);
        color: white;
        font-size: 14px;
        border: none;
        border-radius: 20px;
        cursor: pointer;
    }

    .loading-container {
        display: none;
        text-align: center;
        padding: 20px;
        color: #66666666;
    }

    .loading-dots {
        display: inline-block;
    }

    .loading-dots:after {
        content: '.';
        animation: dots 1.5s steps(5, end) infinite;
    }

    @keyframes dots {

        0%,
        20% {
            content: '.';
        }

        40% {
            content: '..';
        }

        60% {
            content: '...';
        }

        80% {
            content: '....';
        }

        100% {
            content: '.....';
        }
    }
</style>

<!-- JQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js" type="text/javascript"></script>
<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<!-- Common JS -->
<script src="assets/js/common.js?t=1727405560"></script>
<script>
    // API 및 캐시 관리
    const API = {
        CACHE_DURATION: 5 * 60 * 1000,
        cache: {
            data: new Map(),
            timestamps: new Map(),
        },

        getCachedData(key) {
            const timestamp = this.cache.timestamps.get(key);
            if (!timestamp) return null;

            const age = Date.now() - timestamp;
            if (age > this.CACHE_DURATION) {
                this.cache.data.delete(key);
                this.cache.timestamps.delete(key);
                return null;
            }

            return this.cache.data.get(key);
        },

        setCacheData(key, data) {
            this.cache.data.set(key, data);
            this.cache.timestamps.set(key, Date.now());
        },

        async fetchData(endpoint) {
            const cachedData = this.getCachedData(endpoint);
            if (cachedData) return cachedData;

            try {
                const response = await fetch(`https://royal-wood-4b58.flirtingdavid.workers.dev${endpoint}`);

                if (response.status === 429) {
                    throw new Error('Too many requests. Please try again later.');
                }

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || `HTTP error! status: ${response.status}`);
                }

                const data = await response.json();

                if (!data.success) {
                    throw new Error(data.error || 'Failed to fetch data');
                }

                this.setCacheData(endpoint, data);
                return data;

            } catch (error) {
                console.error(`API Error (${endpoint}):`, error);
                throw error;
            }
        },

        // 대시보드 데이터는 루트 경로에서 가져옴
        async getDashboardData() {
            return this.fetchData('/');
        },

        async searchCoin(coinId) {
            return this.fetchData(`/?coinId=${encodeURIComponent(coinId)}`);
        }
    };

    // 유틸리티 함수들
    function formatNumber(num, includePrefix = true) {
        if (!num) return includePrefix ? '$0.00' : '0.00';
        const prefix = includePrefix ? '$' : '';

        if (num < 0.000001) return `${prefix}${num.toExponential(6)}`;
        if (num < 0.01) return `${prefix}${num.toFixed(8)}`;
        if (num < 1) return `${prefix}${num.toFixed(6)}`;
        if (num < 1000) return `${prefix}${num.toFixed(2)}`;
        return `${prefix}${new Intl.NumberFormat('en-US', { maximumFractionDigits: 2 }).format(num)}`;
    }

    function formatLargeNumber(num, includePrefix = true) {
        if (!num) return includePrefix ? '$0.00' : '0.00';
        const prefix = includePrefix ? '$' : '';

        if (num >= 1e9) return `${prefix}${(num / 1e9).toFixed(2)}B`;
        if (num >= 1e6) return `${prefix}${(num / 1e6).toFixed(2)}M`;
        if (num >= 1e3) return `${prefix}${(num / 1e3).toFixed(2)}K`;
        return `${prefix}${num.toFixed(2)}`;
    }

    // UI 업데이트 함수들
    function updateDashboardUI(data) {
        updateTopCoins(data.top_coins);
        updateBIZAData(data.bizauto_data.current_data);
        updatePredictionUI(data.bizauto_data.prediction);
    }

    function updateTopCoins(coins) {
        if (!coins || coins.length === 0) return;

        const headerHtml = `
        <div class="coin-row-header">
            <div class="rank">#</div>
            <div class="name">Name</div>
            <div class="price">Price</div>
            <div class="change">24h %</div>
            <div class="market-cap">Market Cap</div>
            <div class="volume">Volume(24h)</div>
            <div class="prediction-7d">Next 7d<br><span style="font-size: 11px !important;">Prediction</span></div>
            <div class="prediction-30d">Next 30d<br><span style="font-size: 11px !important;">Prediction</span></div>
            <div class="trend">Trend</div>
            <div class="risk">Risk</div>
        </div>
    `;

        const coinsHtml = coins.map((coin, index) => `
        <div class="coin-row">
            <div class="rank">${index + 1}</div>
            <div class="name">${coin.name}</div>
            <div class="price">${formatNumber(coin.current_price)}</div>
            <div class="change ${coin.price_change_24h >= 0 ? 'positive' : 'negative'}">
                ${coin.price_change_24h?.toFixed(2) || '0.00'}%
            </div>
            <div class="market-cap">${formatLargeNumber(coin.market_cap)}</div>
            <div class="volume">${formatLargeNumber(coin.volume_24h)}</div>
            <div class="prediction-7d">${formatNumber(coin.prediction.price_7d.predicted)}</div>
            <div class="prediction-30d">${formatNumber(coin.prediction.price_30d.predicted)}</div>
            <div class="trend ${coin.prediction.trend.toLowerCase()}">${coin.prediction.trend}</div>
            <div class="risk">${coin.prediction.risk_level}</div>
        </div>
    `).join('');

        const container = document.getElementById('topCoinsRows');
        if (container) {
            container.innerHTML = headerHtml + coinsHtml;
        }
    }

    function updateBIZAData(data) {
        if (!data) return;

        // BIZA 총 공급량
        const totalSupply = 2615710367;

        // 현재 가격 기반으로 마켓캡 계산
        const marketCap = data.price * totalSupply;

        const updates = {
            'bizaPrice': [data.price, true],
            'bizaChange': [data.price_change_24h, false],
            'bizaMarketCap': [marketCap, true], // 계산된 마켓캡 사용
            'bizaVolume': [data.volume_24h, true]
        };

        for (const [id, [value, isPrice]] of Object.entries(updates)) {
            const element = document.getElementById(id);
            if (element) {
                if (id === 'bizaChange') {
                    element.textContent = `${value.toFixed(2)}%`;
                    element.className = `value ${value >= 0 ? 'positive' : 'negative'}`;
                } else {
                    element.textContent = isPrice ? formatNumber(value) : formatLargeNumber(value);
                }
            }
        }
    }

    function updatePredictionUI(prediction) {
        if (!prediction) return;

        const updates = {
            'prediction24h': [prediction.price_24h.predicted, true],
            'prediction7d': [prediction.price_7d.predicted, true],
            'confidence': [prediction.price_24h.confidence, false],
            'trend': [prediction.trend, false],
            'risk': [prediction.risk_level, false]
        };

        for (const [id, [value, isPrice]] of Object.entries(updates)) {
            const element = document.getElementById(id);
            if (element) {
                if (isPrice) {
                    element.textContent = formatNumber(value);
                } else if (id === 'confidence') {
                    element.textContent = `${value.toFixed(1)}%`;
                } else if (id === 'trend') {
                    element.textContent = value;
                    element.className = `value ${value.toLowerCase()}`;
                } else {
                    element.textContent = value;
                }
            }
        }
    }

    function updateSearchResult(data) {
        try {
            if (!data || !data.coin_data) return;

            // 코인 로고 필요없이 코인 이름만 표시
            const name = document.getElementById('searchCoinName');
            if (name) name.textContent = `${data.coin_data.id.toUpperCase()} Stats`;

            const elements = {
                'searchPrice': [data.coin_data.current_price, true],
                'searchChange': [data.coin_data.price_change_24h, false],
                'searchMarketCap': [data.coin_data.market_cap, true],
                'searchVolume': [data.coin_data.volume_24h, true],
                'searchPred24h': [data.prediction.price_24h.predicted, true],
                'searchPred7d': [data.prediction.price_7d.predicted, true],
                'searchPred30d': [data.prediction.price_30d.predicted, true],  // 이 줄이 누락되어 있었음
                'searchConfidence': [data.prediction.price_24h.confidence, false],
                'searchTrend': [data.prediction.trend, false],
                'searchRisk': [data.prediction.risk_level, false]
            };

            for (const [id, [value, isPrice]] of Object.entries(elements)) {
                const element = document.getElementById(id);
                if (!element) continue;

                if (id === 'searchChange') {
                    element.textContent = `${value.toFixed(2)}%`;
                    element.className = `value ${value >= 0 ? 'positive' : 'negative'}`;
                } else if (isPrice) {
                    element.textContent = formatNumber(value);
                } else if (id === 'searchConfidence') {
                    element.textContent = `${value.toFixed(0)}%`;
                } else {
                    element.textContent = value;
                }
            }

            // 결과 섹션 표시
            const resultSection = document.getElementById('searchResult');
            resultSection.classList.remove('hidden');
            resultSection.classList.add('visible');

        } catch (error) {
            console.error('Error updating search results:', error);
            alert('Failed to display search results. Please try again.');
        }
    }
    // 에러 처리 함수
    function showError(message) {
        let errorDiv = document.getElementById('errorMessage');
        if (!errorDiv) {
            errorDiv = document.createElement('div');
            errorDiv.id = 'errorMessage';
            errorDiv.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #ff5252;
            color: white;
            padding: 15px 25px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        `;
            document.body.appendChild(errorDiv);
        }

        errorDiv.textContent = message;

        setTimeout(() => {
            errorDiv.style.animation = 'slideOut 0.3s ease-in';
            setTimeout(() => errorDiv.remove(), 300);
        }, 3000);
    }

    // 메인 함수들
    async function refreshData() {
        const button = document.querySelector('.refresh-button');
        if (button) button.disabled = true;

        try {
            const data = await API.getDashboardData();
            updateDashboardUI(data);
            document.getElementById('lastUpdated').textContent =
                `Last updated: ${new Date().toLocaleTimeString()}`;
        } catch (error) {
            showError(error.message);
        } finally {
            if (button) button.disabled = false;
        }
    }

    async function searchCoin() {
        const searchInput = document.getElementById('coinSearch').value.trim().toLowerCase();
        const resultSection = document.getElementById('searchResult');

        if (!searchInput) {
            showError('Please enter a coin ID');
            return;
        }

        try {
            resultSection.classList.remove('hidden');
            const data = await API.searchCoin(searchInput);
            updateSearchResult(data);
            resultSection.classList.add('visible');
        } catch (error) {
            showError(error.message);
            resultSection.classList.add('hidden');
            resultSection.classList.remove('visible');
        }
    }

    function shareToTwitter() {
        const coinName = document.getElementById('searchCoinName').textContent.split(' ')[0];
        const price = document.getElementById('searchPrice').textContent;
        const change = document.getElementById('searchChange').textContent;
        const pred24h = document.getElementById('searchPred24h').textContent;
        const pred7d = document.getElementById('searchPred7d').textContent;
        const trend = document.getElementById('searchTrend').textContent;

        const tweetText =
            `${coinName} Price Analysis 🚀\n\nCurrent: ${price} (${change})\n24h Pred: ${pred24h}\n7d Pred: ${pred7d}\nTrend: ${trend}\n\nPowered by amaxg.net`;

        const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(tweetText)}`;
        window.open(twitterUrl, '_blank');
    }

    // 애니메이션 스타일 추가
    const style = document.createElement('style');
    style.textContent = `
    @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }
    @keyframes slideOut {
        from { transform: translateX(0); opacity: 1; }
        to { transform: translateX(100%); opacity: 0; }
    }
`;
    document.head.appendChild(style);

    // 초기화
    document.addEventListener('DOMContentLoaded', () => {
        // 초기 데이터 로드
        refreshData();

        // 검색 이벤트 리스너
        document.getElementById('coinSearch').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                searchCoin();
            }
        });
    });


    // 챗봇 관련 함수 추가
    // 클라이언트 코드

    const CHAT_WORKER_URL = 'https://hidden-brook-ea47.flirtingdavid.workers.dev';

    function addMessage(text, isUser) {
        const messagesDiv = document.getElementById('messages');
        const messageRow = document.createElement('div');
        messageRow.className = `message-row ${isUser ? 'user-message' : 'bot-message'}`;

        const now = new Date();
        const timestamp = `${now.getHours()}:${String(now.getMinutes()).padStart(2, '0')}`;

        const html = isUser ? `
        <div class="message-content">
            <span class="timestamp">${timestamp}</span>
            <div class="message-bubble">${text}</div>
        </div>
    ` : `
        <div class="message-content">
            <img src="assets/images/favicon.png" class="avatar" alt="BIZA AI Bot" width="30px" height="30px">
            <div class="message-bubble">${text}</div>
            <span class="timestamp">${timestamp}</span>
        </div>
    `;

        messageRow.innerHTML = html;
        messagesDiv.appendChild(messageRow);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }

    async function sendMessage() {
        const input = document.getElementById('chatInput');
        const loadingContainer = document.getElementById('loadingContainer');
        const message = input.value.trim();

        if (!message) return;

        addMessage(message, true);
        input.value = '';
        loadingContainer.style.display = 'block';

        try {
            const response = await fetch('https://hidden-brook-ea47.flirtingdavid.workers.dev', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ message })
            });

            const data = await response.json();

            if (data.text) {
                addMessage(data.text, false);
            } else {
                throw new Error('Invalid response format');
            }

        } catch (error) {
            console.error('Chat error:', error);
            addMessage("I apologize, but I'm having trouble processing your request. Please try again.", false);
        } finally {
            loadingContainer.style.display = 'none';
        }
    }

    // Event listeners
    document.getElementById('chatInput').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            e.preventDefault();
            sendMessage();
        }
    });

    // Initial greeting
    document.addEventListener('DOMContentLoaded', () => {
        addMessage("Hello! I'm BIZA AI Bot. Feel free to ask me anything about BIZA!", false);
    });

    // WebP 지원 확인
    function checkWebpSupport() {
        const elem = document.createElement('canvas');
        if (elem.getContext && elem.getContext('2d')) {
            return elem.toDataURL('image/webp').indexOf('data:image/webp') === 0;
        }
        return false;
    }

    // 문서 로드 시 WebP 지원 여부에 따라 클래스 추가
    document.addEventListener('DOMContentLoaded', () => {
        if (checkWebpSupport()) {
            document.documentElement.classList.add('webp');
        } else {
            document.documentElement.classList.add('no-webp');
        }
    });

</script>
</body>

</html>